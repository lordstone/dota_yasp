extend /layout
include /mixins/hero_td
include /mixins/data_table
include /mixins/data_table_header
include /mixins/picks_bans

block head
  //link(rel="import" href="/public/paper-fab-menu.html")
  link(rel='stylesheet', href="/public/css/yasp_home.css")
   

if user
  block page_content
    #top.header.alt.vert
      h2 Control Center: All Private Matches
      h3 控制中心：所有私有比赛
      img.img-responsive(src='../public/images/curlycue.png', style='margin: auto;')
      br
      // p JSON: #{match_json}
      div#show_matches
        if !match_list
          h3 No matches available. Please go to Upload page to upload some
        else
          .row
            .col-md-12
              +data_table({id:"index", summable:false, heading: "Matches"})
               //
                 tr
                 th Match ID
                 th Overviews
                 th Details
                 th Actions 
               tbody
                 each obj in match_list
                   tr
                     td(colspan='3')
                       a(href="/matches/"+ obj.match_id) Match ID: #{obj.match_id}
                       br
                       - var duration_min = parseInt(obj.upload.duration / 60)
                       - var duration_sec = obj.upload.duration % 60
                       p Duration: #{duration_min} min #{duration_sec} sec
                     td(colspan='7')
                       h4 Radiant: #{obj.upload.radiant_team_name}
                       each player in obj.upload.player_info
                         if player.game_team == 2
                           - var hero_id = player.hero_id
                           - var hero = constants.heroes[hero_id]
                           if hero
                             span.img-text("text-success")
                               img.img-sm(src=hero.img, title=hero.localized_name)
                         else
                           = hero_id
                         span player: #{player.player_name}
 
                     td(colspan='7')
                       h4 Dire: #{obj.upload.dire_team_name}
                       each player in obj.upload.player_info
                         if player.game_team == 2
                           - var hero_id = player.hero_id
                           - var hero = constants.heroes[hero_id]
                           if hero
                             span.img-text("text-success")
                               img.img-sm(src=hero.img, title=hero.localized_name)
                           else
                             = hero_id

                           span player: #{player.player_name}

                     td(colspan='3')
                       a(href="/center/delete/" + obj.match_id) Delete
                   
                   if obj.upload
                     if obj.upload.picks_bans                         
                       +picks_bans_table(obj.upload.picks_bans)
                   else
                     h3 This match has no Picks/Bans
                       
else
  p Please log out and retry


    
append footer_assets
  script(src="/public/js/home/scroll.js")
  script(src="/public/js/home/animatedNavbar.js")
  script(src="/public/js/home/polymerFabs.js")
  //script(src="/public/js/user/center.js")

